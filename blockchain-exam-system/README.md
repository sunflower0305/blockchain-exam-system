# ğŸ” åŒºå—é“¾è¯•å·åŠ å¯†ç³»ç»Ÿ

åŸºäº **Hyperledger Fabric** åŒºå—é“¾å’Œ**å›½å¯†ç®—æ³• (SM2/SM4)** çš„å®‰å…¨è¯•å·ç®¡ç†ç³»ç»Ÿã€‚

## ğŸ“‹ ç³»ç»Ÿç‰¹æ€§

- âœ… **å›½å¯†ç®—æ³•åŠ å¯†** - SM2éå¯¹ç§°åŠ å¯† + SM4å¯¹ç§°åŠ å¯†ï¼Œç¬¦åˆå›½å®¶å¯†ç æ ‡å‡†
- âœ… **åŒºå—é“¾å­˜è¯** - è¯•å·å“ˆå¸Œä¸Šé“¾å­˜å‚¨ï¼Œé˜²ç¯¡æ”¹ã€å¯è¿½æº¯
- âœ… **IPFSåˆ†å¸ƒå¼å­˜å‚¨** - åŠ å¯†æ–‡ä»¶å»ä¸­å¿ƒåŒ–å­˜å‚¨ï¼Œæ— å•ç‚¹æ•…éšœ
- âœ… **æ—¶é—´é”æœºåˆ¶** - è¯•å·ä»…åœ¨è€ƒè¯•æ—¶é—´åˆ°è¾¾åæ‰èƒ½è§£å¯†
- âœ… **å®Œæ•´å®¡è®¡æ—¥å¿—** - æ‰€æœ‰æ“ä½œå…¨ç¨‹è®°å½•ï¼Œæ”¯æŒäº‹åå®¡è®¡
- âœ… **å¤šè§’è‰²æƒé™** - COEã€æ•™å¸ˆã€ç›‘è€ƒäººå‘˜ç­‰è§’è‰²åˆ†ç¦»

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯ (React + TypeScript)               â”‚
â”‚                   Next.js 14 + TailwindCSS                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      åç«¯ (Django REST)                      â”‚
â”‚              Django 4.2 + PostgreSQL + Redis                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        åŒºå—é“¾å±‚                              â”‚
â”‚     Hyperledger Fabric 2.x + IPFS + å›½å¯†ç®—æ³• (SM2/SM4)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
blockchain-exam-system/
â”œâ”€â”€ backend/                    # Django åç«¯
â”‚   â”œâ”€â”€ exam_system/           # Django é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ apps/
â”‚   â”‚   â”œâ”€â”€ users/             # ç”¨æˆ·ç®¡ç† (å¤šè§’è‰²)
â”‚   â”‚   â”œâ”€â”€ exams/             # è€ƒè¯•å’Œè¯•å·ç®¡ç†
â”‚   â”‚   â””â”€â”€ blockchain/        # åŒºå—é“¾æœåŠ¡
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ crypto.py          # å›½å¯†ç®—æ³•å®ç° (SM2/SM4)
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/                   # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/               # Next.js é¡µé¢
â”‚   â”‚   â”œâ”€â”€ components/        # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ lib/               # API å°è£…
â”‚   â”‚   â””â”€â”€ store/             # çŠ¶æ€ç®¡ç† (Zustand)
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ chaincode/                  # Hyperledger Fabric é“¾ç 
â”‚   â””â”€â”€ exam-chaincode/
â”‚       â””â”€â”€ exam_chaincode.go  # Go æ™ºèƒ½åˆçº¦
â”œâ”€â”€ docker/                     # Docker é…ç½®
â””â”€â”€ docker-compose.yml          # å®¹å™¨ç¼–æ’
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.11+
- Node.js 18+
- Docker & Docker Compose
- PostgreSQL 15+
- Redis 7+

### 1. å…‹éš†é¡¹ç›®

```bash
cd blockchain-exam-system
```

### 2. åç«¯é…ç½®

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“ç­‰

# æ•°æ®åº“è¿ç§»
python manage.py migrate

# åˆ›å»ºè¶…çº§ç”¨æˆ·
python manage.py createsuperuser

# å¯åŠ¨æœåŠ¡
python manage.py runserver
```

### 3. å‰ç«¯é…ç½®

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 4. Docker ä¸€é”®éƒ¨ç½²

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

## ğŸ“– API æ–‡æ¡£

### ç”¨æˆ·è®¤è¯

```
POST /api/v1/users/token/          # ç™»å½•è·å–Token
POST /api/v1/users/token/refresh/  # åˆ·æ–°Token
POST /api/v1/users/                # æ³¨å†Œ
GET  /api/v1/users/me/             # è·å–å½“å‰ç”¨æˆ·
POST /api/v1/users/generate_keypair/  # ç”ŸæˆSM2å¯†é’¥å¯¹
```

### è€ƒè¯•ç®¡ç†

```
GET  /api/v1/exams/exams/          # è€ƒè¯•åˆ—è¡¨
POST /api/v1/exams/exams/          # åˆ›å»ºè€ƒè¯•
POST /api/v1/exams/exams/{id}/assign_teacher/  # æŒ‡å®šæ•™å¸ˆ
POST /api/v1/exams/exams/{id}/approve/         # æ‰¹å‡†è¯•å·
```

### è¯•å·ç®¡ç†

```
POST /api/v1/exams/papers/upload/  # ä¸Šä¼ è¯•å·
POST /api/v1/exams/papers/{id}/decrypt/  # è§£å¯†è¯•å·
GET  /api/v1/exams/papers/{id}/audit_logs/  # å®¡è®¡æ—¥å¿—
```

### åŒºå—é“¾

```
GET  /api/v1/blockchain/status/              # åŒºå—é“¾çŠ¶æ€
GET  /api/v1/blockchain/paper/{id}/          # è¯•å·é“¾ä¸Šä¿¡æ¯
GET  /api/v1/blockchain/paper/{id}/history/  # å†å²è®°å½•
POST /api/v1/blockchain/verify/              # éªŒè¯å“ˆå¸Œ
```

## ğŸ‘¥ ç”¨æˆ·è§’è‰²

| è§’è‰² | æƒé™ |
|------|------|
| **admin** | ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™ |
| **coe** | è€ƒè¯•ä¸­å¿ƒï¼Œåˆ›å»ºè€ƒè¯•ã€æŒ‡æ´¾æ•™å¸ˆã€æ‰¹å‡†è¯•å· |
| **teacher** | æ•™å¸ˆï¼Œå‡ºé¢˜ã€ä¸Šä¼ åŠ å¯†è¯•å· |
| **superintendent** | ç›‘è€ƒäººå‘˜ï¼Œè€ƒè¯•æ—¶è§£å¯†è¯•å· |
| **student** | å­¦ç”Ÿï¼ŒæŸ¥çœ‹è€ƒè¯•ä¿¡æ¯ |

## ğŸ” åŠ å¯†æµç¨‹

### è¯•å·åŠ å¯†ä¸Šä¼ æµç¨‹

```
1. æ•™å¸ˆæœ¬åœ°ç¼–å†™è¯•å· (PDF)
2. ç”Ÿæˆéšæœº SM4 å¯†é’¥ (128ä½)
3. ä½¿ç”¨ SM4 åŠ å¯†è¯•å·æ–‡ä»¶
4. ä½¿ç”¨ COE çš„ SM2 å…¬é’¥åŠ å¯† SM4 å¯†é’¥
5. ä¸Šä¼ åŠ å¯†æ–‡ä»¶åˆ° IPFSï¼Œè·å– CID
6. å°†å…ƒæ•°æ® (CID, æ–‡ä»¶å“ˆå¸Œ, æ—¶é—´é”) å†™å…¥åŒºå—é“¾
```

### è¯•å·è§£å¯†æµç¨‹

```
1. ç›‘è€ƒäººå‘˜è¯·æ±‚è§£å¯†
2. æ£€æŸ¥æ—¶é—´é” (å¿…é¡»åœ¨è€ƒè¯•æ—¶é—´ä¹‹å)
3. ä½¿ç”¨ç›‘è€ƒäººå‘˜ç§é’¥è§£å¯† SM4 å¯†é’¥
4. ä½¿ç”¨ SM4 å¯†é’¥è§£å¯†è¯•å·æ–‡ä»¶
5. éªŒè¯æ–‡ä»¶å“ˆå¸Œä¸åŒºå—é“¾è®°å½•ä¸€è‡´
6. è¿”å›è§£å¯†åçš„è¯•å·
```

## ğŸ”§ é“¾ç éƒ¨ç½² (Hyperledger Fabric)

```bash
# 1. å®‰è£…é“¾ç ä¾èµ–
cd chaincode/exam-chaincode
go mod download

# 2. æ‰“åŒ…é“¾ç 
peer lifecycle chaincode package exam-chaincode.tar.gz \
  --path . \
  --lang golang \
  --label exam-chaincode_1.0

# 3. å®‰è£…åˆ°èŠ‚ç‚¹
peer lifecycle chaincode install exam-chaincode.tar.gz

# 4. æ‰¹å‡†å¹¶æäº¤
peer lifecycle chaincode approveformyorg ...
peer lifecycle chaincode commit ...
```

## ğŸ“Š ç³»ç»Ÿç›‘æ§

- **åç«¯**: Django Admin (`/admin/`)
- **åŒºå—é“¾**: Hyperledger Explorer
- **IPFS**: WebUI (`http://localhost:5001/webui`)

## ğŸ›¡ï¸ å®‰å…¨è€ƒè™‘

1. **å¯†é’¥ç®¡ç†** - ç§é’¥ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿçš„å¯†é’¥åŠ å¯†å­˜å‚¨
2. **æ—¶é—´é”** - é“¾ç çº§åˆ«éªŒè¯ï¼Œæ— æ³•ç»•è¿‡
3. **å®¡è®¡æ—¥å¿—** - æ‰€æœ‰æ•æ„Ÿæ“ä½œè®°å½•åœ¨åŒºå—é“¾
4. **HTTPS** - ç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶ä½¿ç”¨ HTTPS

## ğŸ“„ License

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼


 | è§’è‰²      | ç”¨æˆ·å      | å¯†ç            |
  |---------|----------|--------------|
  | ç®¡ç†å‘˜     | admin    | Admin@123456 |
  | æ•™å¸ˆï¼ˆåˆšåˆ›å»ºï¼‰ | teacher1 | Teacher@123  |